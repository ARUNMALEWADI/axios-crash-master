<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
</head>

<body>
    <forrm id="menu">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    Price:<input type="number" id="price"  required>
    choose dish:<input type="text" id="receipe"  name="name" required>
    choose table:<select id="table" required>
    <option>Table 1</option>
    <option>Table 2</option>
    <option>Table 3</option>
</select>
<button id="bills">add to bills</button>

    <h2 id="1">Table 1</h2>
    <ul id="u1"></ul>
    <h2 id="2">Table 2</h2>
    <ul id="u2"></ul>
    <h2 id="3">Table 3</h2>
    <ul id="u3"></ul>

</forrm>
<script>

  
bills.addEventListener('click',()=>{
    let price= document.getElementById('price').value
 let dish= document.getElementById('receipe').value
let table= document.getElementById('table').value
let bills=document.getElementById('bills');

const obj={
    price,
    dish,
    table
}
axios.post("https://crudcrud.com/api/afd88200e9aa43e4a89b3ec08e2a0781/mydata",obj);
axios.get("https://crudcrud.com/api/afd88200e9aa43e4a89b3ec08e2a0781/mydata").then((res)=>{
    for(var i=0;i<res.data.length;i++)
    {   show(res.data[i]);

    }
   });


})
window.addEventListener('DOMContentLoaded',()=>{
   axios.get("https://crudcrud.com/api/afd88200e9aa43e4a89b3ec08e2a0781/mydata").then((res)=>{
    for(var i=0;i<res.data.length;i++)
    {   show(res.data[i]);

    }
   });
})

function show(obj)
{  

    
let del=document.createElement('button')
del.textContent="Delete";
  let item=  document.createElement('li')
  item.textContent=('Dish:'+obj.dish+' -Table no: '+obj.table+' -Rs:'+obj.price);
  item.appendChild(del);
    if(obj.table==='Table 1')
    {   
         document.getElementById('u1').appendChild(item);
         del.addEventListener('click',(e)=>{
            e.preventDefault();
    document.getElementById('u1').removeChild(del.parentElement);
    axios.delete(`https://crudcrud.com/api/afd88200e9aa43e4a89b3ec08e2a0781/mydata/${obj._id}`);
})
    }
    else if(obj.table==='Table 2')
    {    document.getElementById('u2').appendChild(item);
    del.addEventListener('click',(e)=>{
        e.preventDefault();
    document.getElementById('u2').removeChild(del.parentElement);
    axios.delete(`https://crudcrud.com/api/afd88200e9aa43e4a89b3ec08e2a0781/mydata/${obj._id}`);
})

    }
    else{
        document.getElementById('u3').appendChild(item);
        del.addEventListener('click',(e)=>{
        e.preventDefault();
    document.getElementById('u3').removeChild(del.parentElement);
    axios.delete(`https://crudcrud.com/api/afd88200e9aa43e4a89b3ec08e2a0781/mydata/${obj._id}`);
})
    }

   
} 

</script>
</body>

</html>